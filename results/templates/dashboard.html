{% extends 'base.html' %}
{% load humanize %}

{% block content %}
	<h3>Hi {{ request.user.first_name }}, here are your module results.</h3>

	{% for year in years %}
		<h5 class="mt-3">{{ year.year|ordinal }} Year Modules <a href="{% url 'select_module' %}?year={{ year.year }}"><i class="fas fa-plus"></i></a></h5>
		<div class="row">
			{% for result in year.module_result_years.all %}
				<div class="col-md-6 col-lg-4 col-xl-3">
					<div class="card mt-2">
						<div class="card-header py-2 px-3">
							{{ result.module.module_code }}
							<i style="margin-right: 0;" class="fas fa-ellipsis-v"></i>
						</div>
						<div class="card-body py-2 px-3" style="height: 200px; overflow: hidden;">
							<h5 class="">{{ result.module.module_name }}</h5>
							<h6 class="card-subtitle my-2 text-muted">Grade: {{ result.calculate_grade|floatformat:1 }}%</h6>
							<p class="card-text">
								<ul style="padding: 0; list-style-type: none;">
									{% for assessment in result.assessment_results.all %}
										<li>{{ assessment }}</li>
									{% endfor %}
								</ul>
							</p>
						</div>
						<div class="card-footer"><a href="{% url 'view_module_result' result.slug %}" class="card-link">View Module</a></div>
					</div>
				</div>
			{% empty %}
				<p class="pl-3">Looks like you haven't added any module for this year yet...</p>
			{% endfor %}
		</div>
	{% empty %}
		<p>You haven't added any module results yet. Click below to add your first one!</p>
		<a class="btn btn-primary" href="{% url 'select_module' %}">Add a module</a>
	{% endfor %}

{% endblock %}